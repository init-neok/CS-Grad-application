# 🎉 新功能使用指南

## 目录
1. [首页增强](#首页增强)
2. [大学分析页面](#大学分析页面)
3. [功能详解](#功能详解)
4. [交互说明](#交互说明)

---

## 首页增强

### 📊 改进的统计卡片

首页现在有三个**可交互的统计卡片**，带有炫彩渐变效果和动画：

#### 1️⃣ **总申请数卡片** (左边 - 紫色渐变)
```
📊 Total Applications
│
└─ 点击打开 → "申请概览模态框"
   ├─ 显示总申请数
   ├─ 显示成功率 (录取/总数)
   ├─ 申请结果分布图 (饼图)
   └─ "探索所有申请" 按钮
```

**功能特点**：
- ✨ 悬停时自动升起并显示光晕效果
- 📊 交互式饼图显示: 录取、拒绝、候补的比例
- 🔄 实时计算成功率

#### 2️⃣ **大学覆盖数卡片** (中间 - 青蓝色渐变)
```
🏫 Universities Covered
│
└─ 点击或链接 → 跳转到 "大学分析页面"
```

**功能特点**：
- 🌍 跳转到专业的大学分析页面
- 📍 提示文字"点击探索 →"引导用户
- 🎨 最具视觉吸引力的渐变色

#### 3️⃣ **项目数卡片** (右边 - 粉红色渐变)
```
🎓 Programs Catalogued
│
└─ 点击打开 → "项目概览模态框"
   ├─ 显示前8个热门项目
   ├─ 项目分布饼图
   └─ "查看详细分析" 按钮
```

**功能特点**：
- 🎯 快速查看热门项目
- 📈 项目申请数占比分析
- 🔗 直接链接到大学分析页面

---

## 大学分析页面

### 📍 访问方式

**三种方式进入**：
1. 导航栏 → "Universities" 菜单项
2. 首页 → 点击"Universities Covered"卡片
3. 直接访问 `http://localhost:5000/universities`

### 🗂️ 三大标签页面

#### **标签1️⃣: Overview (概览)**

显示大学整体数据分析：

**A. 大学分布饼图** (左侧)
- 显示前10大申请最多的大学
- 彩色圆形图，每种颜色代表一个大学
- **交互**：
  - 悬停显示申请数和百分比
  - 点击图例可切换大学显示/隐藏

**B. 申请率最高的大学列表** (右侧)
- 按录取率排序的前10大学
- 每个大学显示：
  - 排名
  - 大学名称和国家
  - 录取率(%)
  - 录取数/总申请数
  - 进度条可视化
- **交互**：
  - 悬停时背景色改变，卡片向右滑动
  - 点击任意大学 → 打开详细信息模态框

**C. 录取率 vs 申请数散点图** (下方)
- X轴: 申请总数
- Y轴: 录取率(%)
- 每个点代表一个大学
- **交互**：
  - 悬停显示大学名称和录取数
  - 帮助找到"黄金大学"(高申请数 + 高录取率)

---

#### **标签2️⃣: Programs (项目)**

专注于研究生项目的分析：

**A. 项目分布柱状图** (上方)
- 显示前15个最受欢迎的项目
- 双柱设计：
  - 蓝色 = 总申请数
  - 绿色 = 录取人数
- 横向柱状图，易于比较
- **交互**：
  - 悬停显示具体数值

**B. 项目统计表** (下方)
- 表格形式显示所有项目数据
- 列字段：
  | 项目名称 | 总申请数 | 录取数 | 录取率 | 开设大学数 |
  |--------|--------|--------|--------|----------|
  | MS CS  | 85     | 42     | 49.4%  | 20       |
- **特点**：
  - 可滚动查看更多项目
  - 悬停行自动高亮
  - 按录取率排序

---

#### **标签3️⃣: Regional (地区分析)**

按国家/地区分析大学分布：

**A. 地区选择器** (顶部)
- 按钮组显示所有国家/地区
- 每个按钮显示该地区的申请总数
- **交互**：
  - 悬停时按钮升起并显示阴影
  - 点击选择该地区
  - 选中的按钮自动加粗并放大

**样例**:
```
[USA (120)]  [Canada (45)]  [UK (38)]  [Other (12)]
 ↑ (选中)       (未选中)       (未选中)      (未选中)
```

**B. 地区大学分析图** (中部)
- 显示选中地区的大学排名
- 双柱柱状图(申请数 vs 录取数)
- 自动更新，显示该地区前12大大学

**C. 地区大学详细表** (下方)
- 该地区所有大学的完整列表
- 列字段：
  | 大学名称 | 申请数 | 录取数 | 录取率 |
  |---------|--------|--------|--------|
- **交互**：
  - 悬停行高亮
  - 点击大学名称 → 打开详细信息模态框

---

## 功能详解

### 🔍 大学详情模态框

点击任何大学名称时会弹出详细信息框：

```
┌─────────────────────────────────┐
│ Stanford University             │  ← 大学名称
│ USA                             │  ← 国家
├─────────────────────────────────┤
│ 📊 总申请数      ✅ 录取数      ✔️ 录取率
│     15                8              53.3%
├─────────────────────────────────┤
│ ❌ 拒绝数        ⏳ 候补数
│      5                2
├─────────────────────────────────┤
│ 🎓 提供的项目
│ [MS CS] [PhD CS] [MEng CS]
├─────────────────────────────────┤
│ 📈 结果分布
│ [绿色条 53.3% - 8人录取]
│ [红色条 33.3% - 5人拒绝]
│ [黄色条 13.3% - 2人候补]
└─────────────────────────────────┘
```

---

### 🎨 动画和过渡效果

#### 1. **卡片加载动画**
- 首页统计卡片依次出现 (100ms间隔)
- 从下往上滑动 + 淡入效果

#### 2. **标签页切换**
- 切换标签时有淡入淡出效果 (300ms)
- 内容平滑过渡

#### 3. **按钮悬停效果**
- 区域选择按钮悬停时：
  - 向上移动2px
  - 显示阴影
  - 颜色加深

#### 4. **图表加载**
- 图表从无到有的绘制动画 (600ms)
- 使用Chart.js的内置动画

#### 5. **行悬停高亮**
- 表格行悬停时背景色变浅
- 快速过渡 (150ms)

---

## 交互说明

### 🖱️ 鼠标交互

| 交互方式 | 元素 | 效果 |
|---------|------|------|
| **点击** | 统计卡片 | 打开模态框或导航 |
| **点击** | 大学名称 | 显示详细信息 |
| **点击** | 地区按钮 | 切换区域，更新图表 |
| **悬停** | 卡片 | 升起 + 阴影增强 |
| **悬停** | 表格行 | 背景色高亮 |
| **悬停** | 图表元素 | 显示工具提示(tooltip) |

### 📱 移动设备

- 所有功能在手机/平板上完全可用
- 按钮变大便于触摸
- 响应式布局自动调整

---

## 📊 数据来源和计算

### 数据聚合规则

**大学统计**：
- 从所有用户提交的申请记录中聚合
- 按大学名称分组
- 统计：申请数、录取数、拒绝数、候补数

**项目统计**：
- 按项目名称分组(如"MS CS")
- 统计：申请数、录取数、申请该项目的大学数

**地区分析**：
- 按申请记录的"国家"字段分组
- 按国家统计申请总数
- 国家内按大学进一步细分

**录取率计算**：
```
录取率 = 录取数 / 申请总数
例: 8 / 15 = 0.533 = 53.3%
```

---

## 🔐 隐私保护

✅ 所有数据完全**匿名化**
✅ 没有个人身份信息(PII)泄露
✅ 只统计聚合数据
✅ 用户可自主选择是否贡献数据

---

## ⚡ 性能优化

- **懒加载**: 图表只在需要时渲染
- **数据缓存**: API数据在内存中缓存，加快后续访问
- **异步加载**: 不阻塞UI的数据加载
- **响应式图表**: 自动适应窗口大小

---

## 🐛 常见问题

### Q: 为什么某些大学的数据为空?
**A**: 可能是：
- 该大学没有用户提交申请
- 数据库尚未初始化
- 运行 `python scripts/init_db.py --with-sample` 加载示例数据

### Q: 我可以导出数据吗?
**A**: 目前支持：
- 使用浏览器开发者工具导出图表
- 通过API直接获取JSON数据 (见下文)

### Q: 地图什么时候会有?
**A**: 目前是区域选择器，完整的交互地图计划在后续版本实现。

### Q: 为什么分布图中有些数据重叠?
**A**: 散点图中大学很多时可能重叠，使用工具提示(悬停)查看具体数据。

---

## 🔗 API 端点参考

### 获取大学数据
```
GET /api/analytics/universities
```
返回所有大学的详细统计信息。

### 获取项目数据
```
GET /api/analytics/programs
```
返回所有项目的统计信息。

### 获取地区数据
```
GET /api/analytics/regional
```
返回按国家/地区分组的大学数据。

---

## 📧 反馈和建议

发现bug或有功能建议？
- 提交Issue: GitHub repository
- 更新详见: `FEATURE_ENHANCEMENTS.md`

---

**祝您使用愉快！** 🎓✨
